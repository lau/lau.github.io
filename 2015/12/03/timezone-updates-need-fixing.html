<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Timezone updates need to be fixed</title>
  <meta name="description" content="    Fortunately, the technology for keeping planes airborne receive more attention that the information systems for passengers.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://www.creativedeletion.com/2015/12/03/timezone-updates-need-fixing.html">
  <link rel="alternate" type="application/rss+xml" title="Creative Deletion" href="http://www.creativedeletion.com/feed.xml" />
  <style>
    .right_img {
      max-width: 512px;
      float: right;
      margin: 1em;
    }
  </style>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">




    <a class="site-title" href="/">Creative Deletion</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>

    <!-- Begin MailChimp Signup Form -->

    <div id="mc_embed_signup" style='font-family: "Lucida Grande","Lucida Sans Unicode","Lucida Sans",Geneva,Verdana,sans-serif; background: #cefc00; width: 100%; clear:both; margin-bottom: 10px; border-radius: 2px;'>
    <form action="//creativedeletion.us11.list-manage.com/subscribe/post?u=6eaa5232c7bcfc88f50ad6e8b&amp;id=11efd8893f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
      <table style="width: 100%;">
      <tr>
      <td>
          <p style="margin-top:14px; margin-left:10px;">Subscribe to my newsletter with Elixir tips and tricks:</p>
      </td>
      <td>
      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Your e-mail address">
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
      </td>
      </tr>
      </table>

      <div>
      </div>
      <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;"><input type="text" name="b_6eaa5232c7bcfc88f50ad6e8b_11efd8893f" tabindex="-1" value=""></div>
        </div>
    </form>
    </div>
    <!--End mc_embed_signup-->
  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Timezone updates need to be fixed</h1>
    <p class="post-meta">Dec 3, 2015</p>
  </header>

  <article class="post-content">
    <figure class="picture right_img">
  <img src="http://www.creativedeletion.com/assets/plane512.jpg" srcset="http://www.creativedeletion.com/assets/plane512.jpg 1x, http://www.creativedeletion.com/assets/plane1024.jpg 2x" />
  <figcaption>Fortunately, the technology for keeping planes airborne receive more attention that the information systems for passengers.</figcaption>
</figure>

<p>In October I went to ElixirConf <a href="/2015/10/19/elixirconf-talk-date-time.html">to talk about time and timezones</a>. One of the things I talked about was keeping timezone data up to date.</p>

<p>A good example of that showed itself soon after: On the plane going back it had one of those screens showing the local time at the destination. It was incorrect.</p>

<h2 id="event-reminding-software-feature-causes-area-man-to-miss-event">Event reminding software feature causes area man to miss event</h2>
<p>About a week later I was playing a 8-a-side football game. But a player had not shown up. As the game was about to end, he showed up, confused.
Why? Because of the way timezone data updates are handled. It is a broken system. The event was arranged with Facebook. Facebook’s timezone data is out of date. So Facebook told the player that the game started at 9pm instead of 8pm.</p>

<p>A more simple approach such as the local time written on paper, sent with Fax or a text message would not have caused such as problem. But like so many other pieces of software, the Facebook code is “clever” and uses timezone conversions. Facebook thinks it knows where you are and what time it is in that location. When it works, this cleverness can be helpful. But this time it was wrong. When you write code that is clever like that, you have to make sure that the timezone information is up to date. Otherwise it does not work and people get upset.</p>

<h2 id="it-is-a-common-problem">It is a common problem</h2>

<p>Facebook and Boeing airplanes are not alone in having out of date timezone information. The same goes for all the major operating systems such as Windows, Linux, Mac OS X. And many phones too. And telecom providers. In my experience most systems with timezone information are often out of date.</p>

<p>The company in the world with the largest market capitalisation (Apple) has this problem. So has number 8 (Facebook).
And they are both tech companies. I think it is an interesting phenomenon. And they are not the only
ones with that problem.</p>

<h2 id="it-is-important">It is important</h2>

<p>In this case the Facebook event feature failed pretty spectacularly. It reminds me of those photos
with the caption “you had one job”. Facebook events are supposed to tell people about an event and
when it takes place. It failed in this case. Because of out of date timezone data.</p>

<h2 id="it-is-not-super-hard-to-get-up-to-date-data">It is not super hard to get up to date data</h2>

<p>The timezone data is <a href="http://www.iana.org/time-zones">freely available at IANA’s website</a>.
You do not have to pay for it, anyone can download it and use it.</p>

<h2 id="why-has-it-not-been-fixed">Why has it not been fixed?</h2>

<p>Why is it that some of the most valueable companies in the world, and tech companies at that, cannot cope with the
challenge of having up to date timezone data?</p>

<p>Remember when people thought that it was a good idea to only save the two last digits of a year? 90 instead of 1990.
In my experience many programmers just do whatever everyone else is doing. Unless it is an area they care about.
And most programmers do not care about timezone updates. Unless they personally experience problems caused by it.</p>

<h2 id="what-people-do-today">What people do today</h2>

<p>Very few people seem to take responsibility for having up-to-date timezone data, having a process for it
or even caring much about it.</p>

<p>In Linux the common way to update timezone data is using software package updates. There is a package called tzdata that
contains both the data and code at the same time. There are several problems with this. One is that it takes a while
from IANA releasing new data to someone manually make a new package version with the new data. Sometimes an update will
be release by IANA, and no packages are ever made! So even if users update their system with the newest packages the
moment they come out, they will be old.</p>

<p>A second issue is that these
updates are viewed the same way as other software updates. Like a new version of database software. And in order to avoid
regressions, developers/sysadmins will usually have to spend precious time testing things before upgrading software.
It takes time and is seen as a barrier to upgrade software running on a server. How ever small that costs is, it is there.</p>

<p>So the state of timezone updates today for most people is that it relies on two sets of people that have to manually
do something. If just one of them fail to do that, the result is the timezone data is out of date. And right now
the common thing is for both sets of people to not do it or do it slowly.</p>

<h2 id="it-is-just-updated-data-not-a-new-api-or-different-functionality">It is just updated data, not a new API or different functionality</h2>

<p>But the data itself is not new software. It is just data. Functionality should not change because of new data.
New timezone data could be seen similarly to setting the clock of the server. This is commonly done automatically.
Or it could be seen as data in a database changing. If you change software, you have to test it to see if it still
works as required. But when a system is running and data is changed in a database due to normal use, the software
is not tested every single time a row is changed, inserted or updated. That would be silly. Because the software
should be made to handle different kinds of data.</p>

<p>It should be possible to automatically update the timezone data without having to treat it with the same ceremony as with a software update.</p>

<h2 id="a-solution">A solution</h2>

<p>Imagine if this problem was something that could be handled automatically by software.
It turns out that that is in fact the case! <a href="https://github.com/lau/tzdata">Tzdata for Elixir</a> checks the IANA servers
once a day. If there is a new version of the timezone database available, it will be automatically
downloaded and updated. The future is here, but in this case only distributed to Elixir ;-)</p>

<h2 id="the-exception-to-the-rule-offline-embedded-systems">The exception to the rule. Offline embedded systems</h2>

<p>Not all systems are connected to the internet. In that case you cannot do to updates automatically
in the same way. But it needs to happen somehow in order to have timezone based calculations be correct.</p>

<p>If you make a system that uses timezone data, think ahead. The timezone data is updated as often as 10 times a year or more.
In case you have an embedded system that is not connected to the internet all the time, how can that processes be
put in place to make sure it is updated?</p>

<h2 id="what-to-do-if-you-do-not-use-elixir">What to do if you do not use Elixir</h2>

<p>If your system is on the Internet, but rely on timezone updates that are not from Elixir, what can you do to improve the situation?
One solution would be to implement a similar automatic system that updates automatically using the Internet.</p>

<p>Another would be for package maintainers
to have an improved process for manually releasing data just after it is released. I do not have high hopes
for this to happen, but maybe someone reading this could help maintain packages and implement a process
to make it more quick and consistent.</p>

<p>The second part is for users of those packages to have a process for making sure the data is updated as
it become available. Someone
needs to be responsible for it and make sure the data is updated when it is available.</p>

<h2 id="computer-professionals-relying-on-manual-processes-for-something-that-is-perfect-for-computers">Computer professionals relying on manual processes for something that is perfect for computers</h2>

<p>Not all things are easy to automate using computers. But this is. It is funny how people
who make software to help automate things for someone else, themselves do things manually when
it comes to timezone updates. The current system does not work well. It is time to move on to an automated system.</p>

  </article>

  <p style="color: #888; margin-top: 4em;">If you liked this post you might want to <a href="https://twitter.com/intent/follow?screen_name=laut" />follow me on twitter</a> for updates on new posts and more. Twitter handle: @laut</p>

  <p><a href="https://twitter.com/share" class="twitter-share-button" data-via="laut">Tweet</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>

  <h3>More blogposts:</h3>
  
      <li><a href="/2016/04/29/programmers-know-dates.html">What everyone except programmers knows about dates</a></li>
  
      <li><a href="/2016/03/07/comparing_dates_in_elixir.html">Compare date and time in Elixir with protocols</a></li>
  
      <li><a href="/2016/02/04/timetypes_prevent_bugs.html">How more time types prevent bugs and add clarity</a></li>
  

</div>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <!-- Begin MailChimp Signup Form -->

    <div id="mc_embed_signup" style='font-family: "Lucida Grande","Lucida Sans Unicode","Lucida Sans",Geneva,Verdana,sans-serif; color: #555; border: solid 1px #483D8B; width: 100%; clear:both; margin-bottom: 10px; border-radius: 2px;'>
    <form action="//creativedeletion.us11.list-manage.com/subscribe/post?u=6eaa5232c7bcfc88f50ad6e8b&amp;id=11efd8893f" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
        <div id="mc_embed_signup_scroll">
      <table style="width: 100%;">
      <tr>
      <td>
          <p style="margin-top:14px; margin-left:10px;">Subscribe to my newsletter with Elixir tips and tricks:</p>
      </td>
      <td>
      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Your e-mail address">
        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button">
      </td>
      </tr>
      </table>

      <div>
      </div>
      <div id="mce-responses" class="clear">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
      </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
        <div style="position: absolute; left: -5000px;"><input type="text" name="b_6eaa5232c7bcfc88f50ad6e8b_11efd8893f" tabindex="-1" value=""></div>
        </div>
    </form>
    </div>
    <!--End mc_embed_signup-->

    <h2 class="footer-heading">Creative Deletion</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>Creative Deletion</li>
          <li><a href="mailto:"></a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/lau">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">lau</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/laut">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">laut</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Lau Taarnskov's blog on tech
</p>
      </div>
    </div>
    <div style="height: 2em; font-family:Monaco,'Courier New';font-size:10pt;position:fixed;bottom:0;right:10px;" onclick="location.href='/assets/pi.gif'">
    <p>π</p>
    </div>
  </div>

</footer>


    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-728853-7', 'auto');
      ga('send', 'pageview');

    </script>
  </body>

</html>
